(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40567b6e"],{"0a14":function(e,t,n){},15689:function(e,t,n){"use strict";n("0a14")},"24d4":function(e,t,n){"use strict";var r=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,c){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"===typeof e?i(a(e),(function(a){var c=encodeURIComponent(r(a))+n;return o(e[a])?i(e[a],(function(e){return c+encodeURIComponent(r(e))})).join(t):c+encodeURIComponent(r(e[a]))})).join(t):c?encodeURIComponent(r(c))+n+encodeURIComponent(r(e)):""};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],r=0;r<e.length;r++)n.push(t(e[r],r));return n}var a=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},"2f2f":function(e,t,n){"use strict";n("81a9")},"45c2":function(e,t,n){},"6b4f":function(e,t,n){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var a={};if("string"!==typeof e||0===e.length)return a;var c=/\+/g;e=e.split(t);var s=1e3;i&&"number"===typeof i.maxKeys&&(s=i.maxKeys);var u=e.length;s>0&&u>s&&(u=s);for(var l=0;l<u;++l){var h,f,p,d,b=e[l].replace(c,"%20"),v=b.indexOf(n);v>=0?(h=b.substr(0,v),f=b.substr(v+1)):(h=b,f=""),p=decodeURIComponent(h),d=decodeURIComponent(f),r(a,p)?o(a[p])?a[p].push(d):a[p]=[a[p],d]:a[p]=d}return a};var o=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},"7f1a":function(e,t,n){"use strict";n("ef22")},"81a9":function(e,t,n){},9359:function(e,t,n){"use strict";n("a1ca")},"99f3":function(e,t,n){"use strict";t.decode=t.parse=n("6b4f"),t.encode=t.stringify=n("24d4")},a1ca:function(e,t,n){},c743:function(e,t,n){"use strict";n("45c2")},c937:function(e,t,n){"use strict";n.r(t);var r=n("3eb2"),o=(n("7fa4"),n("3f13")),i=n("25c8"),a=n("518b"),c=n("0613"),s=n("9d6d");const{get:u}=Object(s["a"])();function l(){return u("/api/medias/token",{})}var h,f=()=>{const e=async()=>{const e=await l();return e};return{getToken:e}},p=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();(function(e){e["InvalidFile"]="InvalidFile",e["InvalidToken"]="InvalidToken",e["InvalidMetadata"]="InvalidMetadata",e["InvalidChunkSize"]="InvalidChunkSize",e["InvalidCustomVars"]="InvalidCustomVars",e["NotAvailableUploadHost"]="NotAvailableUploadHost",e["ReadCacheFailed"]="ReadCacheFailed",e["InvalidCacheData"]="InvalidCacheData",e["WriteCacheFailed"]="WriteCacheFailed",e["RemoveCacheFailed"]="RemoveCacheFailed",e["GetCanvasContextFailed"]="GetCanvasContextFailed",e["UnsupportedFileType"]="UnsupportedFileType",e["FileReaderReadFailed"]="FileReaderReadFailed",e["NotAvailableXMLHttpRequest"]="NotAvailableXMLHttpRequest",e["InvalidProgressEventTarget"]="InvalidProgressEventTarget",e["RequestError"]="RequestError"})(h||(h={}));var d=function(){function e(e,t){this.name=e,this.message=t,this.stack=(new Error).stack}return e}(),b=function(e){function t(t,n,r,o){var i=e.call(this,h.RequestError,r)||this;return i.code=t,i.reqId=n,i.isRequestError=!0,i.data=o,i}return p(t,e),t}(d),v=function(e){function t(t,n){return void 0===n&&(n=""),e.call(this,0,n,t)||this}return p(t,e),t}(b),y=function(){function e(e,t){this.runTask=e,this.limit=t,this.aborted=!1,this.queue=[],this.processing=[]}return e.prototype.enqueue=function(e){var t=this;return new Promise((function(n,r){t.queue.push({task:e,resolve:n,reject:r}),t.check()}))},e.prototype.run=function(e){var t=this;this.queue=this.queue.filter((function(t){return t!==e})),this.processing.push(e),this.runTask(e.task).then((function(){t.processing=t.processing.filter((function(t){return t!==e})),e.resolve(),t.check()}),(function(t){return e.reject(t)}))},e.prototype.check=function(){var e=this;if(!this.aborted){var t=this.processing.length,n=this.limit-t;this.queue.slice(0,n).forEach((function(t){e.run(t)}))}},e.prototype.abort=function(){this.queue=[],this.aborted=!0},e}(),g=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(){return m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},m.apply(this,arguments)},w=function(){function e(){this.closed=!1}return e.prototype.unsubscribe=function(){this.closed||(this.closed=!0,this._unsubscribe&&this._unsubscribe())},e.prototype.add=function(e){this._unsubscribe=e},e}(),O=function(e){function t(t,n,r){var o=e.call(this)||this;return o.isStopped=!1,o.destination=t&&"object"===typeof t?t:m(m(m({},t&&{next:t}),n&&{error:n}),r&&{complete:r}),o}return g(t,e),t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype.next=function(e){!this.isStopped&&this.destination.next&&this.destination.next(e)},t.prototype.error=function(e){!this.isStopped&&this.destination.error&&(this.isStopped=!0,this.destination.error(e))},t.prototype.complete=function(e){!this.isStopped&&this.destination.complete&&(this.isStopped=!0,this.destination.complete(e))},t}(w),k=function(){function e(e){this._subscribe=e}return e.prototype.subscribe=function(e,t,n){var r=new O(e,t,n);return r.add(this._subscribe(r)),r},e}();function j(e){if(null===e||"undefined"===typeof e)return"";var t,n,r=e+"",o="",i=0;t=n=0,i=r.length;for(var a=0;a<i;a++){var c=r.charCodeAt(a),s=null;if(c<128)n++;else if(c>127&&c<2048)s=String.fromCharCode(c>>6|192,63&c|128);else if((63488&c^55296)>0)s=String.fromCharCode(c>>12|224,c>>6&63|128,63&c|128);else{if((64512&c^55296)>0)throw new RangeError("Unmatched trail surrogate at "+a);var u=r.charCodeAt(++a);if((64512&u^56320)>0)throw new RangeError("Unmatched lead surrogate at "+(a-1));c=((1023&c)<<10)+(1023&u)+65536,s=String.fromCharCode(c>>18|240,c>>12&63|128,c>>6&63|128,63&c|128)}null!==s&&(n>t&&(o+=r.slice(t,n)),o+=s,t=n=a+1)}return n>t&&(o+=r.slice(t,i)),o}function C(e){var t=[],n=0,r=0,o=0;e+="";while(n<e.length){r=255&e.charCodeAt(n),o=0,r<=191?(r&=127,o=1):r<=223?(r&=31,o=2):r<=239?(r&=15,o=3):(r&=7,o=4);for(var i=1;i<o;++i)r=r<<6|63&e.charCodeAt(i+n);4===o?(r-=65536,t.push(String.fromCharCode(55296|r>>10&1023)),t.push(String.fromCharCode(56320|1023&r))):t.push(String.fromCharCode(r)),n+=o}return t.join("")}function x(e){var t,n,r,o,i,a,c,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,f="",p=[];if(!e)return e;e=j(e+"");do{t=e.charCodeAt(l++),n=e.charCodeAt(l++),r=e.charCodeAt(l++),s=t<<16|n<<8|r,o=s>>18&63,i=s>>12&63,a=s>>6&63,c=63&s,p[h++]=u.charAt(o)+u.charAt(i)+u.charAt(a)+u.charAt(c)}while(l<e.length);switch(f=p.join(""),e.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f}function E(e){var t,n,r,o,i,a,c,s,u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",l=0,h=0,f="",p=[];if(!e)return e;e+="";do{o=u.indexOf(e.charAt(l++)),i=u.indexOf(e.charAt(l++)),a=u.indexOf(e.charAt(l++)),c=u.indexOf(e.charAt(l++)),s=o<<18|i<<12|a<<6|c,t=s>>16&255,n=s>>8&255,r=255&s,p[h++]=64===a?String.fromCharCode(t):64===c?String.fromCharCode(t,n):String.fromCharCode(t,n,r)}while(l<e.length);return f=p.join(""),C(f)}function A(e){return e=x(e),e.replace(/\//g,"_").replace(/\+/g,"-")}function _(e){return e=e.replace(/_/g,"/").replace(/-/g,"+"),E(e)}var I,S=n("dd1b"),N=n.n(S),B=function(){return B=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},B.apply(this,arguments)},U=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},P=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},V=Math.pow(1024,2);function z(e,t){var n=t*V;if(n>e.size)n=e.size;else while(e.size>1e4*n)n*=2;for(var r=[],o=Math.ceil(e.size/n),i=0;i<o;i++){var a=e.slice(n*i,i===o-1?e.size:n*(i+1));r.push(a)}return r}function F(e){return Object.keys(e).every((function(e){return 0===e.indexOf("x-qn-meta-")}))}function L(e){return Object.keys(e).every((function(e){return 0===e.indexOf("x:")}))}function R(e){return e.reduce((function(e,t){return e+t}),0)}function T(e,t,n){try{localStorage.setItem(e,JSON.stringify(t))}catch(r){n.warn(new d(h.WriteCacheFailed,"setLocalFileInfo failed: "+e))}}function q(e,t,n){var r=null==t?"_":"_key_"+t+"_";return"qiniu_js_sdk_upload_file_name_"+e+r+"size_"+n}function M(e,t){try{localStorage.removeItem(e)}catch(n){t.warn(new d(h.RemoveCacheFailed,"removeLocalFileInfo failed. key: "+e))}}function H(e,t){var n=null;try{n=localStorage.getItem(e)}catch(o){t.warn(new d(h.ReadCacheFailed,"getLocalFileInfo failed. key: "+e))}if(null==n)return null;var r=null;try{r=JSON.parse(n)}catch(i){M(e,t),t.warn(new d(h.InvalidCacheData,"getLocalFileInfo failed to parse. key: "+e))}return r}function D(e){var t="UpToken "+e;return{Authorization:t}}function G(e){var t=D(e);return B({"content-type":"application/octet-stream"},t)}function K(e){var t=D(e);return B({"content-type":"application/json"},t)}function X(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new window.ActiveXObject("Microsoft.XMLHTTP");throw new d(h.NotAvailableXMLHttpRequest,"the current environment does not support.")}function J(e){return U(this,void 0,void 0,(function(){var t,n;return P(this,(function(r){switch(r.label){case 0:return[4,W(e)];case 1:return t=r.sent(),n=new N.a.ArrayBuffer,n.append(t),[2,n.end()]}}))}))}function W(e){return new Promise((function(t,n){var r=new FileReader;r.onload=function(e){if(e.target){var r=e.target.result;t(r)}else n(new d(h.InvalidProgressEventTarget,"progress event target is undefined"))},r.onerror=function(){n(new d(h.FileReaderReadFailed,"fileReader read failed"))},r.readAsArrayBuffer(e)}))}function $(e,t){return new Promise((function(n,r){var o=X();if(o.open(t.method,e),t.onCreate&&t.onCreate(o),t.headers){var i=t.headers;Object.keys(i).forEach((function(e){o.setRequestHeader(e,i[e])}))}o.upload.addEventListener("progress",(function(e){e.lengthComputable&&t.onProgress&&t.onProgress({loaded:e.loaded,total:e.total})})),o.onreadystatechange=function(){var e=o.responseText;if(4===o.readyState){var t=o.getResponseHeader("x-reqId")||"";if(0!==o.status)if(200===o.status)try{n({data:JSON.parse(e),reqId:t})}catch(c){r(c)}else{var i="xhr request failed, code: "+o.status;e&&(i+=" response: "+e);var a=void 0;try{a=JSON.parse(e)}catch(s){}r(new b(o.status,t,i,a))}else r(new v("network error.",t))}},o.send(t.body)}))}function Q(e){if(e&&e.match){var t=e.match(/(^https?)/);if(!t)return"";var n=t[1];return t=e.match(/^https?:\/\/([^:^/]*):(\d*)/),t?t[2]:"http"===n?"80":"443"}return""}function Y(e){if(e&&e.match){var t=e.match(/^https?:\/\/([^:^/]*)/);return t?t[1]:""}return""}function Z(e){if(!e)throw new d(h.InvalidToken,"invalid token.");var t=e.split(":");if(1===t.length)throw new d(h.InvalidToken,"invalid token segments.");var n=t.length>3?t[1]:t[0];if(!n)throw new d(h.InvalidToken,"missing assess key field.");var r=null;try{r=JSON.parse(_(t[t.length-1]))}catch(i){throw new d(h.InvalidToken,"token parse failed.")}if(null==r)throw new d(h.InvalidToken,"putPolicy is null.");if(null==r.scope)throw new d(h.InvalidToken,"scope field is null.");var o=r.scope.split(":")[0];if(!o)throw new d(h.InvalidToken,"resolve bucketName failed.");return{assessKey:n,bucketName:o,scope:r.scope}}function ee(e){var t=window.URL||window.webkitURL||window.mozURL;return t.createObjectURL(e)}var te={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0",cnEast2:"cn-east-2"},ne=(I={},I[te.z0]={srcUphost:["up.qiniup.com"],cdnUphost:["upload.qiniup.com"]},I[te.z1]={srcUphost:["up-z1.qiniup.com"],cdnUphost:["upload-z1.qiniup.com"]},I[te.z2]={srcUphost:["up-z2.qiniup.com"],cdnUphost:["upload-z2.qiniup.com"]},I[te.na0]={srcUphost:["up-na0.qiniup.com"],cdnUphost:["upload-na0.qiniup.com"]},I[te.as0]={srcUphost:["up-as0.qiniup.com"],cdnUphost:["upload-as0.qiniup.com"]},I[te.cnEast2]={srcUphost:["up-cn-east-2.qiniup.com"],cdnUphost:["upload-cn-east-2.qiniup.com"]},I),re=n("99f3"),oe=function(){return oe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},oe.apply(this,arguments)},ie=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},ae=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function ce(e,t,n){return ie(this,void 0,void 0,(function(){var r,o;return ae(this,(function(i){return r=Object(re["stringify"])({ak:e,bucket:t}),o=n+"://api.qiniu.com/v2/query?"+r,[2,$(o,{method:"GET"})]}))}))}function se(e,t,n){var r=n.url,o=n.id;return r+"/buckets/"+e+"/objects/"+(null!=t?A(t):"~")+"/uploads/"+o}function ue(e,t,n,r){var o=r+"/buckets/"+t+"/objects/"+(null!=n?A(n):"~")+"/uploads";return $(o,{method:"POST",headers:D(e)})}function le(e,t,n,r,o){var i=Z(e).bucketName,a=se(i,t,r)+"/"+n,c=G(e);return o.md5&&(c["Content-MD5"]=o.md5),$(a,oe(oe({},o),{method:"PUT",headers:c}))}function he(e,t,n,r){var o=Z(e).bucketName,i=se(o,t,n);return $(i,oe(oe({},r),{method:"POST",headers:K(e)}))}function fe(e,t,n){return $(e,oe({method:"POST",body:t},n))}var pe=function(){return pe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},pe.apply(this,arguments)},de=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},be=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ve=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},ye=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(ve(arguments[t]));return e},ge=4,me=[0,502,503,504,599],we=ye(me,[612]),Oe=Math.pow(1024,3),ke=function(){function e(e,t,n,r){this.hostPool=n,this.logger=r,this.aborted=!1,this.retryCount=0,this.xhrList=[],this.config=e.config,r.info("config inited.",this.config),this.putExtra=pe({fname:""},e.putExtra),r.info("putExtra inited.",this.putExtra),this.key=e.key,this.file=e.file,this.token=e.token,this.onData=t.onData,this.onError=t.onError,this.onComplete=t.onComplete;try{var o=Z(this.token);this.bucketName=o.bucketName,this.assessKey=o.assessKey}catch(i){r.error("get putPolicy from token failed.",i),this.onError(i)}}return e.prototype.checkAndUpdateUploadHost=function(){return de(this,void 0,void 0,(function(){var e;return be(this,(function(t){switch(t.label){case 0:return this.logger.info("get available upload host."),[4,this.hostPool.getUp(this.assessKey,this.bucketName,this.config.upprotocol)];case 1:if(e=t.sent(),null==e)throw new d(h.NotAvailableUploadHost,"no available upload host.");return null!=this.uploadHost&&this.uploadHost.host!==e.host?this.logger.warn("host switches from "+this.uploadHost.host+" to "+e.host+"."):this.logger.info("use host "+e.host+"."),this.uploadHost=e,[2]}}))}))},e.prototype.checkAndUnfreezeHost=function(){this.logger.info("check unfreeze host."),null!=this.uploadHost&&this.uploadHost.isFrozen()&&(this.logger.warn(this.uploadHost.host+" will be unfrozen."),this.uploadHost.unfreeze())},e.prototype.checkAndFreezeHost=function(e){this.logger.info("check freeze host."),e instanceof b&&null!=this.uploadHost&&me.includes(e.code)&&(this.logger.warn(this.uploadHost.host+" will be temporarily frozen."),this.uploadHost.freeze())},e.prototype.handleError=function(e){this.logger.error(e.message),this.onError(e)},e.prototype.putFile=function(){return de(this,void 0,void 0,(function(){var e,t,n,r;return be(this,(function(o){switch(o.label){case 0:if(this.aborted=!1,this.putExtra.fname||(this.logger.info("use file.name as fname."),this.putExtra.fname=this.file.name),this.file.size>1e4*Oe)return this.handleError(new d(h.InvalidFile,"file size exceed maximum value 10000G")),[2];if(this.putExtra.customVars&&!L(this.putExtra.customVars))return this.handleError(new d(h.InvalidCustomVars,"customVars key should start width x:")),[2];if(this.putExtra.metadata&&!F(this.putExtra.metadata))return this.handleError(new d(h.InvalidMetadata,"metadata key should start with x-qn-meta-")),[2];o.label=1;case 1:return o.trys.push([1,4,,5]),this.uploadAt=(new Date).getTime(),[4,this.checkAndUpdateUploadHost()];case 2:return o.sent(),[4,this.run()];case 3:return e=o.sent(),this.onComplete(e.data),this.checkAndUnfreezeHost(),this.sendLog(e.reqId,200),[2];case 4:return t=o.sent(),this.aborted?(this.logger.warn("upload is aborted."),this.sendLog("",-2),[2]):(this.clear(),this.logger.error(t),t instanceof b&&(this.sendLog(t.reqId,t.code),this.checkAndFreezeHost(t),n=++this.retryCount<=this.config.retryCount,r=we.includes(t.code),r&&n)?(this.logger.warn("error auto retry: "+this.retryCount+"/"+this.config.retryCount+"."),this.putFile(),[2]):(this.onError(t),[3,5]));case 5:return[2]}}))}))},e.prototype.clear=function(){this.xhrList.forEach((function(e){e.onreadystatechange=null,e.abort()})),this.xhrList=[],this.logger.info("cleanup uploading xhr.")},e.prototype.stop=function(){this.logger.info("aborted."),this.clear(),this.aborted=!0},e.prototype.addXhr=function(e){this.xhrList.push(e)},e.prototype.sendLog=function(e,t){var n,r;this.logger.report({code:t,reqId:e,remoteIp:"",upType:"jssdk-h5",size:this.file.size,time:Math.floor(this.uploadAt/1e3),port:Q(null===(n=this.uploadHost)||void 0===n?void 0:n.getUrl()),host:Y(null===(r=this.uploadHost)||void 0===r?void 0:r.getUrl()),bytesSent:this.progress?this.progress.total.loaded:0,duration:Math.floor(((new Date).getTime()-this.uploadAt)/1e3)})},e.prototype.getProgressInfoItem=function(e,t,n){return pe({size:t,loaded:e,percent:e/t*100},null==n?{}:{fromCache:n})},e}(),je=ke,Ce=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),xe=function(){return xe=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},xe.apply(this,arguments)},Ee=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},Ae=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}};function _e(e){var t=/^[1-9]\d*$/;return t.test(String(e))}var Ie=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Ce(t,e),t.prototype.run=function(){return Ee(this,void 0,void 0,(function(){var e,t,n,r,o,i=this;return Ae(this,(function(a){switch(a.label){case 0:if(this.logger.info("start run Resume."),!this.config.chunkSize||!_e(this.config.chunkSize))throw new d(h.InvalidChunkSize,"chunkSize must be a positive integer");if(this.config.chunkSize>1024)throw new d(h.InvalidChunkSize,"chunkSize maximum value is 1024");return[4,this.initBeforeUploadChunks()];case 1:a.sent(),e=new y((function(t){return Ee(i,void 0,void 0,(function(){return Ae(this,(function(n){switch(n.label){case 0:if(this.aborted)throw e.abort(),new Error("pool is aborted");return[4,this.uploadChunk(t)];case 1:return n.sent(),[2]}}))}))}),this.config.concurrentRequestLimit),t=null,n=this.getLocalKey(),r=this.chunks.map((function(t,n){return e.enqueue({chunk:t,index:n})})),a.label=2;case 2:return a.trys.push([2,5,,6]),[4,Promise.all(r)];case 3:return a.sent(),[4,this.mkFileReq()];case 4:return t=a.sent(),[3,6];case 5:throw o=a.sent(),o instanceof b&&(612===o.code||400===o.code)&&M(n,this.logger),o;case 6:return M(n,this.logger),[2,t]}}))}))},t.prototype.uploadChunk=function(e){return Ee(this,void 0,void 0,(function(){var t,n,r,o,i,a,c,s,u,l=this;return Ae(this,(function(h){switch(h.label){case 0:return t=e.index,n=e.chunk,r=this.cachedUploadedList[t],this.logger.info("upload part "+t+", cache:",r),o=this.config.checkByMD5,i=function(){l.usedCacheList[t]=!0,l.updateChunkProgress(n.size,t),l.uploadedList[t]=r,l.updateLocalCache()},r&&!o?(i(),[2]):[4,J(n)];case 1:return a=h.sent(),this.logger.info("computed part md5.",a),r&&a===r.md5?(i(),[2]):(this.usedCacheList[t]=!1,c=function(e){l.updateChunkProgress(e.loaded,t)},s={body:n,md5:this.config.checkByServer?a:void 0,onProgress:c,onCreate:function(e){return l.addXhr(e)}},this.logger.info("part "+t+" start uploading."),[4,le(this.token,this.key,e.index+1,this.getUploadInfo(),s)]);case 2:return u=h.sent(),this.logger.info("part "+t+" upload completed."),c({loaded:n.size,total:n.size}),this.uploadedList[t]={etag:u.data.etag,md5:u.data.md5,size:n.size},this.updateLocalCache(),[2]}}))}))},t.prototype.mkFileReq=function(){return Ee(this,void 0,void 0,(function(){var e,t,n=this;return Ae(this,(function(r){switch(r.label){case 0:return e=xe(xe(xe({parts:this.uploadedList.map((function(e,t){return{etag:e.etag,partNumber:t+1}})),fname:this.putExtra.fname},this.putExtra.mimeType&&{mimeType:this.putExtra.mimeType}),this.putExtra.customVars&&{customVars:this.putExtra.customVars}),this.putExtra.metadata&&{metadata:this.putExtra.metadata}),this.logger.info("parts upload completed, make file.",e),[4,he(this.token,this.key,this.getUploadInfo(),{onCreate:function(e){return n.addXhr(e)},body:JSON.stringify(e)})];case 1:return t=r.sent(),this.logger.info("finish Resume Progress."),this.updateMkFileProgress(1),[2,t]}}))}))},t.prototype.initBeforeUploadChunks=function(){return Ee(this,void 0,void 0,(function(){var e,t,n;return Ae(this,(function(r){switch(r.label){case 0:return this.uploadedList=[],this.usedCacheList=[],e=H(this.getLocalKey(),this.logger),e?[3,2]:(this.logger.info("init upload parts from api."),[4,ue(this.token,this.bucketName,this.key,this.uploadHost.getUrl())]);case 1:return t=r.sent(),this.logger.info("initd upload parts of id: "+t.data.uploadId+"."),this.uploadId=t.data.uploadId,this.cachedUploadedList=[],[3,3];case 2:n=["resume upload parts from local cache,","total "+e.data.length+" part,","id is "+e.id+"."],this.logger.info(n.join(" ")),this.cachedUploadedList=e.data,this.uploadId=e.id,r.label=3;case 3:return this.chunks=z(this.file,this.config.chunkSize),this.loaded={mkFileProgress:0,chunks:this.chunks.map((function(e){return 0}))},this.notifyResumeProgress(),[2]}}))}))},t.prototype.getUploadInfo=function(){return{id:this.uploadId,url:this.uploadHost.getUrl()}},t.prototype.getLocalKey=function(){return q(this.file.name,this.key,this.file.size)},t.prototype.updateLocalCache=function(){T(this.getLocalKey(),{id:this.uploadId,data:this.uploadedList},this.logger)},t.prototype.updateChunkProgress=function(e,t){this.loaded.chunks[t]=e,this.notifyResumeProgress()},t.prototype.updateMkFileProgress=function(e){this.loaded.mkFileProgress=e,this.notifyResumeProgress()},t.prototype.notifyResumeProgress=function(){var e=this;this.progress={total:this.getProgressInfoItem(R(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map((function(t,n){var r=e.usedCacheList[n];return e.getProgressInfoItem(e.loaded.chunks[n],t.size,r)})),uploadInfo:{id:this.uploadId,url:this.uploadHost.getUrl()}},this.onData(this.progress)},t}(je),Se=Ie,Ne=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},Be=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Ue=function(){function e(){this.crc=-1,this.table=this.makeTable()}return e.prototype.makeTable=function(){for(var e=new Array,t=0;t<256;t++){for(var n=t,r=0;r<8;r++)1&n?n=n>>>1^3988292384:n>>>=1;e[t]=n}return e},e.prototype.append=function(e){for(var t=this.crc,n=0;n<e.byteLength;n++)t=t>>>8^this.table[255&(t^e[n])];this.crc=t},e.prototype.compute=function(){return(-1^this.crc)>>>0},e.prototype.readAsUint8Array=function(e){return Ne(this,void 0,void 0,(function(){var t;return Be(this,(function(n){switch(n.label){case 0:return"function"!==typeof e.arrayBuffer?[3,2]:(t=Uint8Array.bind,[4,e.arrayBuffer()]);case 1:return[2,new(t.apply(Uint8Array,[void 0,n.sent()]))];case 2:return[2,new Promise((function(t,n){var r=new FileReader;r.onload=function(){null!=r.result&&"string"!==typeof r.result?t(new Uint8Array(r.result)):n()},r.readAsArrayBuffer(e)}))]}}))}))},e.prototype.file=function(e){return Ne(this,void 0,void 0,(function(){var t,n,r,o,i,a;return Be(this,(function(c){switch(c.label){case 0:return e.size<=V?(t=this.append,[4,this.readAsUint8Array(e)]):[3,2];case 1:return t.apply(this,[c.sent()]),[2,this.compute()];case 2:n=Math.ceil(e.size/V),r=0,c.label=3;case 3:return r<n?(o=r*V,i=r===n-1?e.size:o+V,[4,this.readAsUint8Array(e.slice(o,i))]):[3,6];case 4:a=c.sent(),this.append(new Uint8Array(a)),c.label=5;case 5:return r++,[3,3];case 6:return[2,this.compute()]}}))}))},e.file=function(t){var n=new e;return n.file(t)},e}(),Pe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},e(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ve=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},ze=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Fe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Pe(t,e),t.prototype.run=function(){return Ve(this,void 0,void 0,(function(){var e,t,n,r,o=this;return ze(this,(function(i){switch(i.label){case 0:return this.logger.info("start run Direct."),e=new FormData,e.append("file",this.file),e.append("token",this.token),null!=this.key&&e.append("key",this.key),e.append("fname",this.putExtra.fname),this.config.checkByServer?[4,Ue.file(this.file)]:[3,2];case 1:t=i.sent(),e.append("crc32",t.toString()),i.label=2;case 2:return this.putExtra.customVars&&(this.logger.info("init customVars."),n=this.putExtra.customVars,Object.keys(n).forEach((function(t){return e.append(t,n[t].toString())})),this.logger.info("customVars inited.")),this.logger.info("formData inited."),[4,fe(this.uploadHost.getUrl(),e,{onProgress:function(e){o.updateDirectProgress(e.loaded,e.total)},onCreate:function(e){return o.addXhr(e)}})];case 3:return r=i.sent(),this.logger.info("Direct progress finish."),this.finishDirectProgress(),[2,r]}}))}))},t.prototype.updateDirectProgress=function(e,t){this.progress={total:this.getProgressInfoItem(e,t+1)},this.onData(this.progress)},t.prototype.finishDirectProgress=function(){if(!this.progress)return this.logger.warn("progress is null."),this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},void this.onData(this.progress);var e=this.progress.total;this.progress={total:this.getProgressInfoItem(e.loaded+1,e.size)},this.onData(this.progress)},t}(je),Le=Fe;function Re(e,t,n){void 0===n&&(n=3);var r=X();r.open("POST","https://uplog.qbox.me/log/3"),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.setRequestHeader("Authorization",D(e).Authorization),r.onreadystatechange=function(){4===r.readyState&&200!==r.status&&n>0&&Re(e,t,n-1)};var o=[t.code||"",t.reqId||"",t.host||"",t.remoteIp||"",t.port||"",t.duration||"",t.time||"",t.bytesSent||"",t.upType||"",t.size||""].join(",");r.send(o)}var Te=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},qe=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Te(arguments[t]));return e},Me=function(){function e(t,n,r,o){void 0===n&&(n=!0),void 0===r&&(r="OFF"),void 0===o&&(o="UPLOAD"),this.token=t,this.disableReport=n,this.level=r,this.prefix=o,this.id=++e.id}return e.prototype.getPrintPrefix=function(e){return"Qiniu-JS-SDK ["+e+"]["+this.prefix+"#"+this.id+"]:"},e.prototype.report=function(e,t){if(!this.disableReport)try{Re(this.token,e,t)}catch(n){this.warn(n)}},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["INFO"];n.includes(this.level)&&console.log.apply(console,qe([this.getPrintPrefix("INFO")],e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["INFO","WARN"];n.includes(this.level)&&console.warn.apply(console,qe([this.getPrintPrefix("WARN")],e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=["INFO","WARN","ERROR"];n.includes(this.level)&&console.error.apply(console,qe([this.getPrintPrefix("ERROR")],e))},e.id=0,e}(),He=Me,De=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},Ge=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},Ke=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},Xe=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ke(arguments[t]));return e},Je=new Map,We=function(){function e(e,t){this.host=e,this.protocol=t}return e.prototype.isFrozen=function(){var e=(new Date).getTime(),t=Je.get(this.host);return null!=t&&t>=e},e.prototype.freeze=function(e){void 0===e&&(e=20);var t=(new Date).getTime()+1e3*e;Je.set(this.host,t)},e.prototype.unfreeze=function(){Je["delete"](this.host)},e.prototype.getUrl=function(){return this.protocol+"://"+this.host},e.prototype.getUnfreezeTime=function(){return Je.get(this.host)},e}(),$e=function(){function e(e){void 0===e&&(e=[]),this.initHosts=e,this.cachedHostsMap=new Map}return e.prototype.register=function(e,t,n,r){this.cachedHostsMap.set(e+"@"+t,n.map((function(e){return new We(e,r)})))},e.prototype.refresh=function(e,t,n){var r,o,i,a;return De(this,void 0,void 0,(function(){var c,s,u;return Ge(this,(function(l){switch(l.label){case 0:return c=this.cachedHostsMap.get(e+"@"+t)||[],c.length>0?[2]:this.initHosts.length>0?(this.register(e,t,this.initHosts,n),[2]):[4,ce(e,t,n)];case 1:return s=l.sent(),null!=(null===s||void 0===s?void 0:s.data)&&(u=Xe((null===(o=null===(r=s.data.up)||void 0===r?void 0:r.acc)||void 0===o?void 0:o.main)||[],(null===(a=null===(i=s.data.up)||void 0===i?void 0:i.acc)||void 0===a?void 0:a.backup)||[]),this.register(e,t,u,n)),[2]}}))}))},e.prototype.getUp=function(e,t,n){return De(this,void 0,void 0,(function(){var r,o,i;return Ge(this,(function(a){switch(a.label){case 0:return[4,this.refresh(e,t,n)];case 1:return a.sent(),r=this.cachedHostsMap.get(e+"@"+t)||[],0===r.length?[2,null]:(o=r.filter((function(e){return!e.isFrozen()})),o.length>0?[2,o[0]]:(i=r.slice().sort((function(e,t){return(e.getUnfreezeTime()||0)-(t.getUnfreezeTime()||0)})),[2,i[0]]))}}))}))},e}();function Qe(e,t,n,r){return e.config&&e.config.forceDirect?(r.info("ues forceDirect mode."),new Le(e,t,n,r)):e.file.size>4*V?(r.info("file size over 4M, use Resume."),new Se(e,t,n,r)):(r.info("file size less or equal than 4M, use Direct."),new Le(e,t,n,r))}function Ye(e,t,n,r,o){var i=new He(n,null===o||void 0===o?void 0:o.disableStatisticsReport,null===o||void 0===o?void 0:o.debugLogLevel,e.name),a={file:e,key:t,token:n,putExtra:r,config:rt(o,i)},c=new $e(a.config.uphost);return new k((function(e){var t=Qe(a,{onData:function(t){return e.next(t)},onError:function(t){return e.error(t)},onComplete:function(t){return e.complete(t)}},c,i);return t.putFile(),t.stop.bind(t)}))}var Ze=function(){return Ze=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Ze.apply(this,arguments)},et=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},tt=function(e,t){var n="function"===typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{while((void 0===t||t-- >0)&&!(r=i.next()).done)a.push(r.value)}catch(c){o={error:c}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a},nt=function(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(tt(arguments[t]));return e};function rt(e,t){var n=Ze({},e),r=n.upprotocol,o=n.uphost,i=et(n,["upprotocol","uphost"]),a=Ze({uphost:[],retryCount:3,checkByMD5:!1,forceDirect:!1,useCdnDomain:!0,checkByServer:!1,concurrentRequestLimit:3,chunkSize:ge,upprotocol:"https",debugLogLevel:"OFF",disableStatisticsReport:!1},i);r&&(a.upprotocol=r.replace(/:$/,""));var c=[];if(t&&null!=(null===e||void 0===e?void 0:e.uphost)&&null!=(null===e||void 0===e?void 0:e.region)&&t.warn("do not use both the uphost and region config."),o)Array.isArray(o)?c.push.apply(c,nt(o)):c.push(o);else if(null===a||void 0===a?void 0:a.region){var s=ne[null===a||void 0===a?void 0:a.region];a.useCdnDomain?c.push.apply(c,nt(s.cdnUphost)):c.push.apply(c,nt(s.srcUphost))}return Ze(Ze({},a),{uphost:c.filter(Boolean)})}var ot=function(){return ot=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},ot.apply(this,arguments)},it=function(e,t,n,r){function o(e){return e instanceof n?e:new n((function(t){t(e)}))}return new(n||(n=Promise))((function(n,i){function a(e){try{s(r.next(e))}catch(t){i(t)}}function c(e){try{s(r["throw"](e))}catch(t){i(t)}}function s(e){e.done?n(e.value):o(e.value).then(a,c)}s((r=r.apply(e,t||[])).next())}))},at=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:c(0),throw:c(1),return:c(2)},"function"===typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function c(e){return function(t){return s([e,t])}}function s(i){if(n)throw new TypeError("Generator is already executing.");while(a)try{if(n=1,r&&(o=2&i[0]?r["return"]:i[0]?r["throw"]||((o=r["return"])&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(o=a.trys,!(o=o.length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(c){i=[6,c],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},ct={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"},st=4,ut=Math.log(2),lt=Object.keys(ct).map((function(e){return ct[e]})),ht=ct.JPEG;function ft(e){return lt.includes(e)}(function(){function e(e,t){this.file=e,this.config=t,this.config=ot({quality:.92,noCompressIfLarger:!1},this.config)}e.prototype.process=function(){return it(this,void 0,void 0,(function(){var e,t,n,r,o,i;return at(this,(function(a){switch(a.label){case 0:if(this.outputType=this.file.type,e={},!ft(this.file.type))throw new d(h.UnsupportedFileType,"unsupported file type: "+this.file.type);return[4,this.getOriginImage()];case 1:return t=a.sent(),[4,this.getCanvas(t)];case 2:return n=a.sent(),r=1,this.config.maxWidth&&(r=Math.min(1,this.config.maxWidth/n.width)),this.config.maxHeight&&(r=Math.min(1,r,this.config.maxHeight/n.height)),e.width=n.width,e.height=n.height,[4,this.doScale(n,r)];case 3:return o=a.sent(),i=this.toBlob(o),i.size>this.file.size&&this.config.noCompressIfLarger?[2,{dist:this.file,width:e.width,height:e.height}]:[2,{dist:i,width:o.width,height:o.height}]}}))}))},e.prototype.clear=function(e,t,n){this.outputType===ht?(e.fillStyle="#fff",e.fillRect(0,0,t,n)):e.clearRect(0,0,t,n)},e.prototype.getOriginImage=function(){var e=this;return new Promise((function(t,n){var r=ee(e.file),o=new Image;o.onload=function(){t(o)},o.onerror=function(){n("image load error")},o.src=r}))},e.prototype.getCanvas=function(e){var t=this;return new Promise((function(n,r){var o=document.createElement("canvas"),i=o.getContext("2d");if(i){var a=e.width,c=e.height;o.height=c,o.width=a,t.clear(i,a,c),i.drawImage(e,0,0),n(o)}else r(new d(h.GetCanvasContextFailed,"context is null"))}))},e.prototype.doScale=function(e,t){return it(this,void 0,void 0,(function(){var n,r,o,i,a,c,s,u,l,f,p,b,v,y,g,m;return at(this,(function(w){if(1===t)return[2,e];if(n=e.getContext("2d"),r=Math.min(st,Math.ceil(1/t/ut)),o=Math.pow(t,1/r),i=document.createElement("canvas"),a=i.getContext("2d"),c=e.width,s=e.height,u=c,l=s,i.width=c,i.height=s,!a||!n)throw new d(h.GetCanvasContextFailed,"mctx or sctx can't be null");for(b=0;b<r;b++)v=c*o|0,y=s*o|0,b===r-1&&(v=u*t,y=l*t),b%2===0?(f=e,p=a):(f=i,p=n),this.clear(p,c,s),p.drawImage(f,0,0,c,s,0,0,v,y),c=v,s=y;return g=f===e?i:e,m=p.getImageData(0,0,c,s),g.width=c,g.height=s,p.putImageData(m,0,0),[2,g]}))}))},e.prototype.toBlob=function(e){var t=e.toDataURL(this.outputType,this.config.quality),n=atob(t.split(",")[1]).split("").map((function(e){return e.charCodeAt(0)})),r=new Blob([new Uint8Array(n)],{type:this.outputType});return r}})();const pt={key:0,class:"preview"},dt=["src"],bt={key:1,class:"preview"};var vt=Object(r["defineComponent"])({__name:"UploadImage",props:{initFileList:{type:Array,require:!1}},emits:["change"],setup(e,{emit:t}){const n=e;Object(r["onMounted"])(()=>{var e;null!==(e=n.initFileList)&&void 0!==e&&e.length&&(a.value=n.initFileList.map(e=>({fileName:e,uid:e,name:e,url:e})))});const{getToken:o}=f(),a=Object(r["ref"])([]);async function c(e){const{file:n,onSuccess:r,onProgress:i,onError:c}=e,s="/shot/"+n.name,u=await o(),l=Ye(n,s,u);l.subscribe({next:e=>{const{percent:t}=(null===e||void 0===e?void 0:e.total)||{};null===i||void 0===i||i({percent:t})},error:e=>{null===c||void 0===c||c(e)},complete:e=>{const{hash:o,key:i}=e,c=n.name,s="https://static.aside.fun/"+i;null===r||void 0===r||r(s),a.value=[{fileName:c,uid:o,name:c,url:s}],t("change",s)}})}function s(e){"uploading"!==e.file.status&&(a.value=e.fileList)}return(e,t)=>{const n=Object(r["resolveComponent"])("Upload");return Object(r["openBlock"])(),Object(r["createBlock"])(n,{onChange:s,"custom-request":c,"file-list":a.value,"max-count":1},{itemRender:Object(r["withCtx"])(()=>[]),default:Object(r["withCtx"])(()=>{var e;return[a.value.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",pt,[Object(r["createElementVNode"])("img",{src:null===(e=a.value[0])||void 0===e?void 0:e.url,draggable:"false"},null,8,dt)])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",bt,[Object(r["createVNode"])(Object(r["unref"])(i["a"]))]))]}),_:1},8,["file-list"])}}}),yt=(n("c743"),n("6dd4")),gt=n.n(yt);const mt=gt()(vt,[["__scopeId","data-v-13982f72"]]);var wt=mt;const Ot={class:"wrapper"},kt={class:"left"},jt=Object(r["createElementVNode"])("div",{class:"title"},"创建新团队",-1),Ct=Object(r["createElementVNode"])("div",{class:"subtitle",style:{marginBottom:"36px"}},"与团队成员一同协作",-1),xt={class:"form"},Et={class:"item"},At=Object(r["createElementVNode"])("div",{class:"title"},"团队名称",-1),_t={class:"box"},It={class:"item"},St=Object(r["createElementVNode"])("div",{class:"title"},"团队描述（可选）",-1),Nt={class:"box"},Bt={class:"item"},Ut=Object(r["createElementVNode"])("div",{class:"title"},"LOGO（可选）",-1),Pt={class:"box"},Vt={class:"buttons"},zt=Object(r["createTextVNode"])("创建团队"),Ft=Object(r["createTextVNode"])("取消");var Lt=Object(r["defineComponent"])({__name:"CreateTeamModal",props:{visible:{type:Boolean,require:!0}},emits:["close","ok"],setup(e,{emit:t}){const n=e,i=Object(r["ref"])(""),a=Object(r["ref"])(""),c=Object(r["ref"])("");function s(){i.value?t("ok",{name:i.value,description:a.value,logoUrl:c.value}):o["a"].warning("请输入团队名称")}return Object(r["watch"])([()=>n.visible],()=>{i.value="",a.value="",c.value=""}),(e,o)=>{const u=Object(r["resolveComponent"])("Input"),l=Object(r["resolveComponent"])("TextArea"),h=Object(r["resolveComponent"])("Button"),f=Object(r["resolveComponent"])("Modal");return Object(r["openBlock"])(),Object(r["createBlock"])(f,{visible:n.visible,centered:"",footer:null,width:550,class:"create-team-modal",closable:!1},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",Ot,[Object(r["createElementVNode"])("div",kt,[jt,Ct,Object(r["createElementVNode"])("div",xt,[Object(r["createElementVNode"])("div",Et,[At,Object(r["createElementVNode"])("div",_t,[Object(r["createVNode"])(u,{class:"input",placeholder:"请输入团队名称",value:i.value,"onUpdate:value":o[0]||(o[0]=e=>i.value=e)},null,8,["value"])])]),Object(r["createElementVNode"])("div",It,[St,Object(r["createElementVNode"])("div",Nt,[Object(r["createVNode"])(l,{class:"input textarea",placeholder:"请输入团队描述",value:a.value,"onUpdate:value":o[1]||(o[1]=e=>a.value=e)},null,8,["value"])])]),Object(r["createElementVNode"])("div",Bt,[Ut,Object(r["createElementVNode"])("div",Pt,[Object(r["createVNode"])(wt,{onChange:o[2]||(o[2]=e=>c.value=e),"init-file-list":c.value?[c.value]:void 0},null,8,["init-file-list"])])])]),Object(r["createElementVNode"])("div",Vt,[Object(r["createVNode"])(h,{type:"primary",class:"primary-btn-large",onClick:o[3]||(o[3]=e=>s())},{default:Object(r["withCtx"])(()=>[zt]),_:1}),Object(r["createVNode"])(h,{class:"primary-btn-large",onClick:o[4]||(o[4]=e=>t("close"))},{default:Object(r["withCtx"])(()=>[Ft]),_:1})])])])]),_:1},8,["visible"])}}});n("9359");const Rt=Lt;var Tt=Rt,qt=n("2e81"),Mt=n("8e64"),Ht=n("4f07");const Dt={class:"sidebar"},Gt={key:0,class:"menus"},Kt=["onClick"],Xt={class:"icon"},Jt={key:0,class:"divider"},Wt={key:1,class:"menu"},$t=Object(r["createElementVNode"])("div",{class:"avatar"},null,-1),Qt=Object(r["createElementVNode"])("br",null,null,-1),Yt=Object(r["createElementVNode"])("div",{class:"avatar"},null,-1),Zt=Object(r["createElementVNode"])("br",null,null,-1),en=Object(r["createElementVNode"])("div",{class:"avatar"},null,-1);var tn=Object(r["defineComponent"])({__name:"index",setup(e){const t=Object(r["ref"])(!1),{sidebarKey:n,menuItems:s,activeMenuItem:u,activeHeaderBarMenuKey:l}=Object(a["c"])(Object(c["a"])()),h=Object(r["ref"])([]),f=Object(r["ref"])(!0);function p(){s.value={teamMenuItems:h.value,tools:[{title:"新建团队",icon:i["a"],onClick:()=>t.value=!0,key:"new",type:"button"}]},n.value=h.value[0].key,u.value=h.value[0],Ht["a"].replace({path:"/team/"+h.value[0].key})}function d(e){const t=Object(Mt["a"])(e,s.value)||null;"team"===(null===t||void 0===t?void 0:t.type)&&Ht["a"].push({path:`/${l.value}/${t.key}`}),"menu"===(null===t||void 0===t?void 0:t.type)&&Ht["a"].push({path:"/home"}),n.value=e,u.value=t}function b(e){return e===n.value?"menu-item active":"menu-item"}async function v(e){const n=await Object(qt["b"])(e);n&&(o["a"].success("创建成功"),t.value=!1,y())}async function y(){f.value=!0;const e=await Object(qt["h"])();h.value=e.map(e=>({title:e.name,imageUrl:e.logo,key:e.id,type:"team"})),p(),f.value=!1}async function g(){await y()}return Object(r["onMounted"])(()=>{g(),n.value="home"}),(e,n)=>{const o=Object(r["resolveComponent"])("Avatar"),i=Object(r["resolveComponent"])("Tooltip"),a=Object(r["resolveComponent"])("Skeleton");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",Dt,[f.value?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Wt,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Array(3).fill(null),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t,class:"fake-data"},[$t,Object(r["createVNode"])(a,{width:20*t+60+"px",height:"20px"},null,8,["width"])]))),128)),Qt,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Array(1).fill(null),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t,class:"fake-data"},[Object(r["createVNode"])(a,{class:"avatar",circle:""}),Object(r["createVNode"])(a,{width:"140px",height:"20px"})]))),128)),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Array(2).fill(null),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t,class:"fake-data"},[Yt,Object(r["createVNode"])(a,{width:"140px",height:"20px"})]))),128)),Zt,(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Array(1).fill(null),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t,class:"fake-data"},[Object(r["createVNode"])(a,{class:"avatar",circle:""}),Object(r["createVNode"])(a,{width:"140px",height:"20px"})]))),128)),(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Array(2).fill(null),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t,class:"fake-data"},[en,Object(r["createVNode"])(a,{width:"140px",height:"20px"})]))),128))])):(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Gt,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(s),(e,t)=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",{key:t,class:"menu-container"},[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(e,e=>(Object(r["openBlock"])(),Object(r["createBlock"])(i,{key:e.key,title:e.title,placement:"right"},{default:Object(r["withCtx"])(()=>[Object(r["createElementVNode"])("div",{class:Object(r["normalizeClass"])(b(e.key)),onClick:t=>e.onClick?e.onClick():d(e.key)},[Object(r["createElementVNode"])("div",Xt,[e.icon?(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.icon),{key:0})):Object(r["createCommentVNode"])("",!0),e.imageUrl?(Object(r["openBlock"])(),Object(r["createBlock"])(o,{key:1,size:16,src:e.imageUrl,shape:"circle"},null,8,["src"])):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("div",{class:"title",style:Object(r["normalizeStyle"])(e.parentNode?{fontWeight:400}:{})},Object(r["toDisplayString"])(e.title),5)],10,Kt)]),_:2},1032,["title"]))),128)),"tools"!==t&&e.length?(Object(r["openBlock"])(),Object(r["createElementBlock"])("div",Jt)):Object(r["createCommentVNode"])("",!0)]))),128))]))]),Object(r["createVNode"])(Tt,{visible:t.value,onClose:n[0]||(n[0]=e=>t.value=!1),onOk:v},null,8,["visible"])],64)}}});n("15689");const nn=tn;var rn=nn,on=n("4365"),an=n("d838"),cn=n("1c72");const sn={class:"header-bar"},un=Object(r["createElementVNode"])("div",{class:"left-side"},[Object(r["createElementVNode"])("div",{class:"logo-bar"},[Object(r["createElementVNode"])("img",{class:"logo",src:"https://static.aside.fun/upload/shot-logo.svg",draggable:!1})])],-1),ln={class:"right-side"},hn={class:"headerbar-menu-container"},fn=["onClick"],pn={class:"icon"},dn={style:{flexShrink:0}},bn={class:"userinfo"},vn=Object(r["createTextVNode"])("设置"),yn=Object(r["createTextVNode"])("退出登录");var gn=Object(r["defineComponent"])({__name:"DashboardHeaderBar",emits:["search"],setup(e,{emit:t}){const n=Object(cn["c"])(),o=Object(r["ref"])(""),i=Object(c["a"])(),{user:s,headerBarMenuItems:u,activeHeaderBarMenuKey:l}=Object(a["c"])(i);function h(e){return e!==l.value?"headerbar-menu-item":"headerbar-menu-item active"}function f(e){const{teamId:t}=n.params;Ht["a"].push({path:`/${e}/${t}`})}function p(){on["b"].logoutWithRedirect({redirectUri:"https://aside.fun/login"}).then(()=>{localStorage.clear()})}return(e,n)=>{const i=Object(r["resolveComponent"])("Input"),a=Object(r["resolveComponent"])("Avatar"),c=Object(r["resolveComponent"])("MenuItem"),l=Object(r["resolveComponent"])("MenuDivider"),d=Object(r["resolveComponent"])("Menu"),b=Object(r["resolveComponent"])("Dropdown");return Object(r["openBlock"])(),Object(r["createElementBlock"])("header",sn,[un,Object(r["createElementVNode"])("div",ln,[Object(r["createElementVNode"])("div",hn,[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(u),e=>(Object(r["openBlock"])(),Object(r["createElementBlock"])("a",{class:Object(r["normalizeClass"])(h(e.key)),key:e.key,onClick:t=>f(e.key)},[Object(r["createElementVNode"])("span",pn,[e.icon?(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(e.icon),{key:0})):Object(r["createCommentVNode"])("",!0)]),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])(e.name),1)],10,fn))),128))]),Object(r["createVNode"])(i,{placeholder:"搜索功能或者幻灯片内容 (⌘ + K)",class:"cover-radius input search-input",value:o.value,"onUpdate:value":n[0]||(n[0]=e=>o.value=e),onChange:n[1]||(n[1]=e=>t("search",o.value))},{prefix:Object(r["withCtx"])(()=>[Object(r["createVNode"])(Object(r["unref"])(an["a"]))]),_:1},8,["value"]),Object(r["createElementVNode"])("div",dn,[Object(r["createVNode"])(b,null,{overlay:Object(r["withCtx"])(()=>[Object(r["createVNode"])(d,{class:"user-dropdown"},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(c,{class:"disabled-menu"},{default:Object(r["withCtx"])(()=>{var e,t,n;return[Object(r["createElementVNode"])("div",bn,[Object(r["createVNode"])(a,{size:36,src:null===(e=Object(r["unref"])(s))||void 0===e?void 0:e.picture},null,8,["src"]),Object(r["createElementVNode"])("span",null,Object(r["toDisplayString"])((null===(t=Object(r["unref"])(s))||void 0===t?void 0:t.name)||(null===(n=Object(r["unref"])(s))||void 0===n?void 0:n.nickname)||"匿名用户"),1)])]}),_:1}),Object(r["createVNode"])(l),Object(r["createVNode"])(c,null,{default:Object(r["withCtx"])(()=>[vn]),_:1}),Object(r["createVNode"])(c,{onClick:n[2]||(n[2]=e=>p())},{default:Object(r["withCtx"])(()=>[yn]),_:1})]),_:1})]),default:Object(r["withCtx"])(()=>{var e;return[Object(r["createVNode"])(a,{size:36,src:null===(e=Object(r["unref"])(s))||void 0===e?void 0:e.picture},null,8,["src"])]}),_:1})])])])}}});n("7f1a");const mn=gn;var wn=mn;const On={class:"dashboard"},kn={class:"right-side"};var jn=Object(r["defineComponent"])({__name:"index",setup(e){return Object(r["onBeforeMount"])(()=>{var e;null!==(e=window.history.state)&&void 0!==e&&e.token&&localStorage.setItem("token",window.history.state.token)}),(e,t)=>{const n=Object(r["resolveComponent"])("router-view"),o=Object(r["resolveComponent"])("SkeletonTheme");return Object(r["openBlock"])(),Object(r["createBlock"])(o,{color:"#eef5ee",highlight:"#f7fcf7",duration:2},{default:Object(r["withCtx"])(()=>[Object(r["createVNode"])(wn),Object(r["createElementVNode"])("div",On,[Object(r["createVNode"])(rn),Object(r["createElementVNode"])("div",kn,[Object(r["createVNode"])(n)])])]),_:1})}}});n("2f2f");const Cn=gt()(jn,[["__scopeId","data-v-698dbf04"]]);t["default"]=Cn},dd1b:function(e,t,n){(function(t){e.exports=t()})((function(e){"use strict";var t=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function n(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];n+=(r&o|~r&i)+t[0]-680876936|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[1]-389564586|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[2]+606105819|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[3]-1044525330|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[4]-176418897|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[5]+1200080426|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[6]-1473231341|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[7]-45705983|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[8]+1770035416|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[9]-1958414417|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[10]-42063|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[11]-1990404162|0,r=(r<<22|r>>>10)+o|0,n+=(r&o|~r&i)+t[12]+1804603682|0,n=(n<<7|n>>>25)+r|0,i+=(n&r|~n&o)+t[13]-40341101|0,i=(i<<12|i>>>20)+n|0,o+=(i&n|~i&r)+t[14]-1502002290|0,o=(o<<17|o>>>15)+i|0,r+=(o&i|~o&n)+t[15]+1236535329|0,r=(r<<22|r>>>10)+o|0,n+=(r&i|o&~i)+t[1]-165796510|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[6]-1069501632|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[11]+643717713|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[0]-373897302|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[5]-701558691|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[10]+38016083|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[15]-660478335|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[4]-405537848|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[9]+568446438|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[14]-1019803690|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[3]-187363961|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[8]+1163531501|0,r=(r<<20|r>>>12)+o|0,n+=(r&i|o&~i)+t[13]-1444681467|0,n=(n<<5|n>>>27)+r|0,i+=(n&o|r&~o)+t[2]-51403784|0,i=(i<<9|i>>>23)+n|0,o+=(i&r|n&~r)+t[7]+1735328473|0,o=(o<<14|o>>>18)+i|0,r+=(o&n|i&~n)+t[12]-1926607734|0,r=(r<<20|r>>>12)+o|0,n+=(r^o^i)+t[5]-378558|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[8]-2022574463|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[11]+1839030562|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[14]-35309556|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[1]-1530992060|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[4]+1272893353|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[7]-155497632|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[10]-1094730640|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[13]+681279174|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[0]-358537222|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[3]-722521979|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[6]+76029189|0,r=(r<<23|r>>>9)+o|0,n+=(r^o^i)+t[9]-640364487|0,n=(n<<4|n>>>28)+r|0,i+=(n^r^o)+t[12]-421815835|0,i=(i<<11|i>>>21)+n|0,o+=(i^n^r)+t[15]+530742520|0,o=(o<<16|o>>>16)+i|0,r+=(o^i^n)+t[2]-995338651|0,r=(r<<23|r>>>9)+o|0,n+=(o^(r|~i))+t[0]-198630844|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[7]+1126891415|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[14]-1416354905|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[5]-57434055|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[12]+1700485571|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[3]-1894986606|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[10]-1051523|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[1]-2054922799|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[8]+1873313359|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[15]-30611744|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[6]-1560198380|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[13]+1309151649|0,r=(r<<21|r>>>11)+o|0,n+=(o^(r|~i))+t[4]-145523070|0,n=(n<<6|n>>>26)+r|0,i+=(r^(n|~o))+t[11]-1120210379|0,i=(i<<10|i>>>22)+n|0,o+=(n^(i|~r))+t[2]+718787259|0,o=(o<<15|o>>>17)+i|0,r+=(i^(o|~n))+t[9]-343485551|0,r=(r<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0}function r(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function o(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e[t]+(e[t+1]<<8)+(e[t+2]<<16)+(e[t+3]<<24);return n}function i(e){var t,o,i,a,c,s,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,r(e.substring(t-64,t)));for(e=e.substring(t-64),o=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<o;t+=1)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(l,i),t=0;t<16;t+=1)i[t]=0;return a=8*u,a=a.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(a[2],16),s=parseInt(a[1],16)||0,i[14]=c,i[15]=s,n(l,i),l}function a(e){var t,r,i,a,c,s,u=e.length,l=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=u;t+=64)n(l,o(e.subarray(t-64,t)));for(e=t-64<u?e.subarray(t-64):new Uint8Array(0),r=e.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],t=0;t<r;t+=1)i[t>>2]|=e[t]<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(n(l,i),t=0;t<16;t+=1)i[t]=0;return a=8*u,a=a.toString(16).match(/(.*?)(.{0,8})$/),c=parseInt(a[2],16),s=parseInt(a[1],16)||0,i[14]=c,i[15]=s,n(l,i),l}function c(e){var n,r="";for(n=0;n<4;n+=1)r+=t[e>>8*n+4&15]+t[e>>8*n&15];return r}function s(e){var t;for(t=0;t<e.length;t+=1)e[t]=c(e[t]);return e.join("")}function u(e){return/[\u0080-\uFFFF]/.test(e)&&(e=unescape(encodeURIComponent(e))),e}function l(e,t){var n,r=e.length,o=new ArrayBuffer(r),i=new Uint8Array(o);for(n=0;n<r;n+=1)i[n]=e.charCodeAt(n);return t?i:o}function h(e){return String.fromCharCode.apply(null,new Uint8Array(e))}function f(e,t,n){var r=new Uint8Array(e.byteLength+t.byteLength);return r.set(new Uint8Array(e)),r.set(new Uint8Array(t),e.byteLength),n?r:r.buffer}function p(e){var t,n=[],r=e.length;for(t=0;t<r-1;t+=2)n.push(parseInt(e.substr(t,2),16));return String.fromCharCode.apply(String,n)}function d(){this.reset()}return"5d41402abc4b2a76b9719d911017c592"!==s(i("hello"))&&function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},"undefined"===typeof ArrayBuffer||ArrayBuffer.prototype.slice||function(){function t(e,t){return e=0|e||0,e<0?Math.max(e+t,0):Math.min(e,t)}ArrayBuffer.prototype.slice=function(n,r){var o,i,a,c,s=this.byteLength,u=t(n,s),l=s;return r!==e&&(l=t(r,s)),u>l?new ArrayBuffer(0):(o=l-u,i=new ArrayBuffer(o),a=new Uint8Array(i),c=new Uint8Array(this,u,o),a.set(c),i)}}(),d.prototype.append=function(e){return this.appendBinary(u(e)),this},d.prototype.appendBinary=function(e){this._buff+=e,this._length+=e.length;var t,o=this._buff.length;for(t=64;t<=o;t+=64)n(this._hash,r(this._buff.substring(t-64,t)));return this._buff=this._buff.substring(t-64),this},d.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r.charCodeAt(t)<<(t%4<<3);return this._finish(i,o),n=s(this._hash),e&&(n=p(n)),this.reset(),n},d.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},d.prototype.setState=function(e){return this._buff=e.buff,this._length=e.length,this._hash=e.hash,this},d.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},d.prototype._finish=function(e,t){var r,o,i,a=t;if(e[a>>2]|=128<<(a%4<<3),a>55)for(n(this._hash,e),a=0;a<16;a+=1)e[a]=0;r=8*this._length,r=r.toString(16).match(/(.*?)(.{0,8})$/),o=parseInt(r[2],16),i=parseInt(r[1],16)||0,e[14]=o,e[15]=i,n(this._hash,e)},d.hash=function(e,t){return d.hashBinary(u(e),t)},d.hashBinary=function(e,t){var n=i(e),r=s(n);return t?p(r):r},d.ArrayBuffer=function(){this.reset()},d.ArrayBuffer.prototype.append=function(e){var t,r=f(this._buff.buffer,e,!0),i=r.length;for(this._length+=e.byteLength,t=64;t<=i;t+=64)n(this._hash,o(r.subarray(t-64,t)));return this._buff=t-64<i?new Uint8Array(r.buffer.slice(t-64)):new Uint8Array(0),this},d.ArrayBuffer.prototype.end=function(e){var t,n,r=this._buff,o=r.length,i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<o;t+=1)i[t>>2]|=r[t]<<(t%4<<3);return this._finish(i,o),n=s(this._hash),e&&(n=p(n)),this.reset(),n},d.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},d.ArrayBuffer.prototype.getState=function(){var e=d.prototype.getState.call(this);return e.buff=h(e.buff),e},d.ArrayBuffer.prototype.setState=function(e){return e.buff=l(e.buff,!0),d.prototype.setState.call(this,e)},d.ArrayBuffer.prototype.destroy=d.prototype.destroy,d.ArrayBuffer.prototype._finish=d.prototype._finish,d.ArrayBuffer.hash=function(e,t){var n=a(new Uint8Array(e)),r=s(n);return t?p(r):r},d}))},ef22:function(e,t,n){}}]);
//# sourceMappingURL=chunk-40567b6e.73f701d2.js.map