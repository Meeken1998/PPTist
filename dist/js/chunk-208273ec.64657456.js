(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-208273ec"],{"2e81":function(e,t,n){"use strict";n.d(t,"b",(function(){return r})),n.d(t,"h",(function(){return u})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return l})),n.d(t,"f",(function(){return d})),n.d(t,"g",(function(){return v})),n.d(t,"c",(function(){return b})),n.d(t,"a",(function(){return p}));var c=n("9d6d");const{post:a,get:o}=Object(c["a"])();var i;function r(e){return a("/api/teams/create",e)}function u(){return o("/api/teams",{})}function s(e){return o(`/api/teams/${e}/detail`)}function l(e){return o(`/api/teams/${e}/docs`)}function d(e){return o("/api/teams/invites/"+e)}function v(e){return o(`/api/teams/${e}/members`)}function b(e,t,n){return a("/api/teams/invites/"+e,{inviterUserId:t,targetUserId:n})}function p(e){return a(`/api/teams/invites/${e}/accept`,{})}(function(e){e[e["INDIVIDUAL"]=1]="INDIVIDUAL",e[e["PUBLIC"]=2]="PUBLIC"})(i||(i={}))},3564:function(e,t,n){"use strict";n("7559")},"3a6a":function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var c=n("9d6d");const{get:a,post:o}=Object(c["a"])();function i(e){return a("/api/users/"+e,{})}function r(e){return o("/api/users/search",{keyword:e})}},4745:function(e,t,n){"use strict";n.r(t);n("7fa4");var c=n("3f13"),a=(n("0f78"),n("1220")),o=n("3eb2"),i=n("1c72"),r=n("2e81"),u=n("3a6a"),s=n("4365"),l=n("4f07"),d=n("518b"),v=n("0613");const b=e=>(Object(o["pushScopeId"])("data-v-4691cd0c"),e=e(),Object(o["popScopeId"])(),e),p={class:"join-invite-page"},f={key:0,class:"invite-card"},m={class:"content"},j={class:"bold"},O=b(()=>Object(o["createElementVNode"])("span",null," 的 ",-1)),I={class:"bold"},g=b(()=>Object(o["createElementVNode"])("div",null," 正在邀请你加入团队 ",-1)),k={key:0,class:"tips"},N=Object(o["createTextVNode"])("加入团队");var V=Object(o["defineComponent"])({__name:"JoinTeam",setup(e){const t=Object(i["c"])(),{inviteId:n}=t.params,b=Object(o["ref"])(),V=Object(o["ref"])(),w=Object(o["ref"])(),{loginState:y}=Object(d["c"])(Object(v["a"])());async function h(){const{team:e,invite:t}=await Object(r["f"])(n);b.value=e,V.value=t;const c=await Object(u["a"])(null===t||void 0===t?void 0:t.inviterUserId);w.value=c}function B(){a["a"].confirm({title:"未登录",content:"加入团队前，请先登录账号",okText:"去登录",cancelText:"取消",centered:!0,onOk:()=>{localStorage.setItem("inviteId",n),l["a"].push({name:"login"})}})}async function C(){if(!y.value&&!localStorage.getItem("token"))return void B();const e=await Object(r["a"])(n);var t;e&&(c["a"].success("你已成功加入 "+(null===(t=b.value)||void 0===t?void 0:t.name)),setTimeout(()=>{var e;l["a"].push({path:"/team/"+(null===(e=b.value)||void 0===e?void 0:e.id)})},1e3))}return Object(o["onMounted"])(()=>{h()}),(e,t)=>{var n,c,a;const i=Object(o["resolveComponent"])("Avatar"),r=Object(o["resolveComponent"])("Button");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",p,[b.value&&V.value&&w.value?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",f,[Object(o["createVNode"])(i,{size:100,src:null===(n=b.value)||void 0===n?void 0:n.logo,draggable:!1},null,8,["src"]),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("div",null,[Object(o["createElementVNode"])("span",j,Object(o["toDisplayString"])(null===(c=b.value)||void 0===c?void 0:c.name),1),O,Object(o["createElementVNode"])("span",I,Object(o["toDisplayString"])(Object(o["unref"])(s["a"])(w.value)),1)]),g,null!==(a=V.value)&&void 0!==a&&a.outdateTimestamp?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",k,"这个邀请链接将在 "+Object(o["toDisplayString"])(Math.ceil((V.value.outdateTimestamp-Date.now())/864e5))+" 天后过期",1)):Object(o["createCommentVNode"])("",!0)]),Object(o["createVNode"])(r,{type:"primary",class:"primary-btn-large",onClick:t[0]||(t[0]=e=>C())},{default:Object(o["withCtx"])(()=>[N]),_:1})])):Object(o["createCommentVNode"])("",!0)])}}}),w=(n("3564"),n("6dd4")),y=n.n(w);const h=y()(V,[["__scopeId","data-v-4691cd0c"]]);t["default"]=h},7559:function(e,t,n){}}]);
//# sourceMappingURL=chunk-208273ec.64657456.js.map